{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/utils.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/astParser.js","../../src/compiler/index.js","../../src/init.js","../../src/index.js"],"sourcesContent":["const originArrMethods = Array.prototype,\n      newArrMethods = Object.create(originArrMethods);\n\nconst ARR_METHODS = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'reverse',\n  'sort',\n  'splice'\n];\n\nARR_METHODS.map((method) => {\n  newArrMethods[method] = function (...args) {\n    const result = originArrMethods[methods].apply(this, args),\n          ob = this.__ob__;\n\n    let newArr;\n\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        newArr = args;\n        break;\n      case 'splice':\n        newArr = args.slice(2);\n        break;\n      default:\n        break;\n    }\n\n    if (newArr) ob.observeArr(newArr);\n\n    return result;\n  }\n})\n\nexport {\n  newArrMethods\n}","function proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newValue) {\n      if (vm[target][key] === newValue) return;\n      vm[target][key] = newValue;\n    }\n  })\n}\n\nfunction isObject (value) {\n  return typeof value === 'object' && value !== null;\n}\n\nfunction isArray (value) {\n  return Array.isArray(value);\n}\n\nfunction setConstantProperty (data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    value\n  });\n}\n\nexport {\n  proxy,\n  isObject,\n  isArray,\n  setConstantProperty\n}","import { newArrMethods } from \"./array\";\nimport { isObject, isArray, setConstantProperty } from '../utils';\n\nclass Observer {\n  \n  constructor(data) {\n    setConstantProperty(data, '__ob__', this);\n\n    if (isArray(data)) {\n      data.__proto__ = newArrMethods;\n      this.observeArr(data);\n    } else {\n      this.walk(data);\n    }\n  }\n\n  walk (data) {\n    const keys = Object.keys(data);\n\n    keys.map((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n\n  observeArr (data) {\n    data.map((item) => {\n      observe(item);\n    });\n  }\n}\n\nfunction defineReactive (data, key, value) {\n  observe(value);\n  Object.defineProperty(data, key, {\n    get () {\n      console.log('响应式获取：' + value);\n      return value;\n    },\n    set (newValue) {\n      if (value === newValue) return;\n      console.log('响应式设置：' + key + ' = ' + newValue);\n      observe(newValue);\n      value = newValue;\n    }\n  }) \n}\n\nfunction observe (data) {\n  if (!isObject(data) || data.__ob__) { \n    return data;\n  }\n\n  new Observer(data);\n}\n\nexport {\n  observe\n}","import { observe } from \"./observer\";\nimport { proxy } from './utils';\n\nfunction initState (vm) {\n  const options = vm.$options;\n\n  if (options.props) {\n    initProps(vm);\n  }\n\n  if (options.methods) {\n    initMethods(vm);\n  }\n\n  if (options.data) {\n    initData(vm);\n  }\n\n  if (options.computed) {\n    initComputed(vm);\n  }\n\n  if (options.watch) {\n    initWatch(vm);\n  }\n}\n\nfunction initProps (vm) {}\n\nfunction initMethods (vm) {}\n\nfunction initData (vm) {\n  let data = vm.$options.data;\n\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data;\n  \n  for (let key in data) {\n    proxy(vm, '_data', key);\n  }\n  \n  observe(data);\n}\n\nfunction initWatch (vm) {}\n\nfunction initComputed (vm) {}\n\nexport {\n  initState\n}","/**\r\n * attribute: 匹配属性 id=\"app\" id='app' id=qpp\r\n * ncname: 标签名\r\n * qnameCapture： 特殊标签名如中间有符号\r\n * startTagOpen startTagClose：开始标签的开始和结束\r\n * endTag：结束标签\r\n */\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\nconst startTagClose = /^\\s*(\\/?)>/\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\n\r\n\r\n// <div id = \"app\" style = \"color:red;font-size: 20px;\" >\r\n//   你好, {{ name }}\r\n//    <span class=\"text\" style=\"color: green;\">{{ age }}</span>\r\n// </div >\r\nfunction parseHtmlToAst(html) {\r\n\r\n  //文本\r\n  let text\r\n\r\n  // 确定根节点\r\n  let root\r\n\r\n  // 确定节点的父节点\r\n  let currentParent\r\n  //保存节点\r\n  let stack = []\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf('<')\r\n\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag()\r\n\r\n\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n\r\n      //结束标签 如</span></div>\r\n      const endTagMatch = html.match(endTag)\r\n\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch[1])\r\n        continue\r\n      }\r\n    }\r\n\r\n    //看是否还有下一个开始标签\r\n    if (textEnd > 0) {\r\n\r\n      //拿到两个标签之间的文本节点     \r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      advance(text.length)\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n  function parseStartTag() {\r\n    //拿到标签\r\n    const start = html.match(startTagOpen)\r\n\r\n    let end //结束标记\r\n    let attr //属性标记\r\n\r\n    if (start) {\r\n      const match = {\r\n        //div\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      //截取掉了<div \r\n      advance(start[0].length)\r\n      //如果没有匹配到结束标签，就匹配属性赋值给attr,直到匹配到结束标签\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        // attr: 0:id=\"app\" 1:id 2:= 3:app\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          // 双引号，单引号，没有引号 id = \"app\" 'app' app\r\n          value: attr[3] || attr[4] || attr[5]\r\n        })\r\n        advance(attr[0].length)\r\n        // match为 tagName:'div' attrs: name=id value=app\r\n        // return match\r\n      }\r\n\r\n      //end: >符号  开始标签的结束符号\r\n      if (end) {\r\n        //到此时， <div id = \"app\" style = \"color:red;font-size: 20px;\" >解析完成\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  //截取函数，从html中截取一定长度的字符\r\n  function advance(number) {\r\n    html = html.substring(number)\r\n  }\r\n\r\n  function start(tagName, attrs) {\r\n    // 节点内容\r\n    const element = createASTElement(tagName, attrs)\r\n\r\n    //没有根节点的话当前就是根节点\r\n    if (!root) {\r\n      root = element\r\n    }\r\n\r\n    currentParent = element\r\n\r\n    stack.push(element)\r\n  }\r\n\r\n  function end(tagName) {\r\n    //当前节点\r\n    const element = stack.pop()\r\n\r\n    //找到当前节点的父节点\r\n    currentParent = stack[stack.length - 1]\r\n\r\n    //当前节点的父亲赋值\r\n    if (currentParent) {\r\n      element.parent = currentParent\r\n      currentParent.children.push(element)\r\n    }\r\n  }\r\n  function chars(text) {\r\n    text = text.trim()\r\n    if (text.length > 0) {\r\n      currentParent.children.push({\r\n        // nodeType = 3 文本节点\r\n        type: 3,\r\n        text\r\n      })\r\n    }\r\n  }\r\n\r\n  function createASTElement(tagName, attrs) {\r\n    return {\r\n      tag: tagName,\r\n      type: 1,\r\n      children: [],\r\n      attrs,\r\n      parent\r\n    }\r\n  }\r\n  return root\r\n}\r\n\r\n\r\nexport {\r\n  parseHtmlToAst\r\n}","import { parseHtmlToAst } from './astParser'\r\n\r\nfunction compileToRenderFunction(html) {\r\n  const ast = parseHtmlToAst(html)\r\n  console.log(ast)\r\n}\r\n\r\nexport {\r\n  compileToRenderFunction\r\n}","import { initState } from \"./state\";\nimport { compileToRenderFunction } from './compiler'\n\nfunction initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n\n    vm.$options = options;\n\n    initState(vm);\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const options = vm.$options\n\n    el = document.querySelector(el)\n    vm.$el = el\n\n    if (!options.render) {\n      let template = options.template\n\n      if (!template && el) {\n        template = el.outerHTML\n      }\n\n      const render = compileToRenderFunction(template)\n\n      options.render = render\n    }\n  }\n}\n\nexport {\n  initMixin\n}","import { initMixin } from './init';\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\n\nexport default Vue;\n\n"],"names":["originArrMethods","Array","prototype","newArrMethods","Object","create","ARR_METHODS","map","method","args","result","methods","apply","ob","__ob__","newArr","slice","observeArr","proxy","vm","target","key","defineProperty","get","set","newValue","isObject","value","isArray","setConstantProperty","data","enumerable","configurable","Observer","constructor","__proto__","walk","keys","defineReactive","item","observe","console","log","initState","options","$options","props","initData","computed","watch","_data","call","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHtmlToAst","html","text","root","currentParent","stack","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","length","end","substring","chars","attr","push","name","number","element","createASTElement","pop","parent","children","trim","type","tag","compileToRenderFunction","ast","initMixin","Vue","_init","el","$mount","document","querySelector","$el","render","template","outerHTML"],"mappings":"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"}